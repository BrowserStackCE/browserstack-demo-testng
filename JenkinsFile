pipeline {
	agent any
	tools {
		maven 'Maven 3.8.1'
	}
	stages {
	    stage ('Initiate tests on BrowserStack') {
	        steps {
    			browserstack(credentialsId: "${credentials}") {
                    sh "mvn clean -P ${configuration} test"
                }
	        }
		}
	}
	post {
		always {
			junit 'target/surefire-reports/TEST-*.xml'
			browserStackReportPublisher "${product}"
		}
	}
}